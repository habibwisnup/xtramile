<mat-form-field>
  <mat-label>Search by ID or Name</mat-label>
  <input matInput [(ngModel)]="search" (ngModelChange)="onSearchChange()" placeholder="Search by ID or Name">
</mat-form-field>
<button mat-raised-button color="primary" (click)="openCreateDialog()">Add New Patient</button>
<table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8 mat-table">

  <ng-container matColumnDef="pid">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> PID </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.pid }} </td>
  </ng-container>
  
  <ng-container matColumnDef="firstName">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> First Name </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.firstName }} </td>
  </ng-container>

  <ng-container matColumnDef="lastName">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Name </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.lastName }} </td>
  </ng-container>

  <ng-container matColumnDef="dateOfBirth">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Date of Birth </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.dateOfBirth | date:'MM/dd/yyyy' }} </td>
  </ng-container>

  <ng-container matColumnDef="gender">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Gender </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.gender }} </td>
  </ng-container>

  <ng-container matColumnDef="address">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Address </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.address }} </td>
  </ng-container>

  <ng-container matColumnDef="suburb">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Suburb </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.suburb }} </td>
  </ng-container>

  <ng-container matColumnDef="state">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> State </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.state }} </td>
  </ng-container>

  <ng-container matColumnDef="postcode">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Postcode </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.postcode }} </td>
  </ng-container>

  <ng-container matColumnDef="phoneNo">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone No </th>
    <td mat-cell *matCellDef="let patient"> {{ patient.phoneNo }} </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef> Actions </th>
    <td mat-cell *matCellDef="let patient">
      <button mat-button color="white" class="edit-button" (click)="editPatient(patient.pid!)">Edit</button>
      <button mat-button color="white" class="delete-button" (click)="deletePatient(patient.pid!)">Delete</button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

</table>

<mat-paginator [length]="totalPatients" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]" (page)="onPageChange($event)">
</mat-paginator>

<div *ngIf="loading" class="loading-overlay">
  <mat-spinner></mat-spinner>
  <p>Loading...</p>
</div>
